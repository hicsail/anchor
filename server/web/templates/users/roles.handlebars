<div class="container-fluid h-100">
  <div class="row h-100">
    {{>dashboardNav}}
    <div class="col-sm-9 col-md-10">
      <div style="padding: 30px">
        <h3>Roles</h3>
        <hr>
        <p>Click on user to change permissions</p>
        <div class="card">
          <div style="padding: 20px">
            <table id="userTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
              <thead>
                <tr>
                  <th>Username</th>
                  <th>Name</th>
                  <th>Email</th>
                  {{#each role}}
                    <th>{{this.name}}</th>
                  {{/each}}
                </tr>
              </thead>
              <tbody>
                {{#each usersList as |user|}}
                  <tr>
                    <td>{{user.username}}</td>
                    <td>{{user.name}}</td>
                    <td>{{user.email}}</td>

                    {{#each ../role as |role|}}
                      {{#if user.roles.root}}
                        <td>
                          <label>
                            <input class="roleCheck" id="{{name}}" type="checkbox" onchange="onCheckboxClicked(this, {{jsonify user._id}})" disabled {{#userHasRole user name}}checked{{/userHasRole}}>
                          </label>
                        </td>
                      {{else}}
                        <td>
                          <label>
                            <input class="roleCheck" id="{{name}}" type="checkbox" onchange="onCheckboxClicked(this, {{jsonify user._id}})" {{#userHasRole user name}}checked{{/userHasRole}}>
                          </label>
                        </td>
                      {{/if}}
                    {{/each}}
                  </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
        <br>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="/public/scripts/users/roles.js"></script>

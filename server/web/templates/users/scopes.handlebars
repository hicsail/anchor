<div class="container-fluid h-100">
  <div class="row h-100">
    {{>dashboardNav}}
    <div class="col-sm-9 col-md-10">
      <div style="padding: 30px">
        <h3>{{title}}</h3>
        <hr>
        <p>Click on routes to change it's scope</p>
        <div class="card">
          <div style="padding: 20px">
            <table id="routeTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
              <thead>
                <tr>
                  <th>Path</th>
                  <th>Method</th>
                  {{#each role}}
                    <th>{{this}}</th>
                  {{/each}}
                </tr>
              </thead>
              <tbody>
                {{#each route as |routeRow method|}}
                  {{#each routeRow as |scope path|}}
                    <tr>
                      <td>{{path}}</td>
                      <td>{{method}}</td>
                      {{#each ../../role as |r|}}
                        <td>
                          <label>
                            <input class="scopeCheck" id="{{r}}" type="checkbox" onchange="onCheckboxClicked(this, {{jsonify scope}}, {{jsonify path}}, {{jsonify method}})" {{#routeHasScope scope r}}checked{{/routeHasScope}}>
                          </label>
                        </td>
                      {{/each}}
                    </tr>
                  {{/each}}
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
        <br>
        <hr>
        <p>NOTE: Routes below here are unconfigurable, to allow configuration make sure to update the routes with the scope from the Config file</p>
        <div class="card">
          <div style="padding: 20px">
            <table id="UnconfigurableRouteTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
              <thead>
              <tr>
                <th>Path</th>
                <th>Method</th>
                {{#each role}}
                  <th>{{this}}</th>
                {{/each}}
              </tr>
              </thead>
              <tbody>
              {{#each UnconfigurableRoutes as |routeObject index|}}
                <tr>
                  <td>{{routeObject.path}}</td>
                  <td>{{routeObject.method}}</td>
                  {{#each ../../role as |r|}}
                    <td>
                      <label>
                        <input class="scopeCheck" id="{{r}}" type="checkbox" disabled {{#routeHasScope routeObject.scope r}}checked{{/routeHasScope}}>
                      </label>
                    </td>
                  {{/each}}
                </tr>
                {{routeObject.path}}
              {{/each}}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="/public/scripts/users/scopes.js"></script>
